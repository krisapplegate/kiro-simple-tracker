{
  "title": "[HIGH][SECURITY] Add Request Validation",
  "body": "## Problem\n\nDirect use of user input without validation - vulnerable to injection attacks.\n\n**Current State:**\n```javascript\napp.post('/api/objects', authenticateToken, async (req, res) => {\n  const { name, type, lat, lng } = req.body  // \u274c No validation\n  // Direct use of user input\n})\n```\n\n## Security Risks\n\n- \ud83d\udea8 SQL injection potential\n- \ud83d\udea8 XSS attacks through unvalidated input\n- \ud83d\udea8 Type confusion bugs\n- \ud83d\udea8 Invalid data in database\n- \ud83d\udea8 No input sanitization\n\n## Recommendation\n\n```bash\nnpm install joi  # or zod, yup, express-validator\n```\n\n```javascript\nconst Joi = require('joi')\n\nconst objectSchema = Joi.object({\n  name: Joi.string().min(1).max(255).required(),\n  type: Joi.string().valid('vehicle', 'person', 'asset', 'device').required(),\n  lat: Joi.number().min(-90).max(90).required(),\n  lng: Joi.number().min(-180).max(180).required(),\n  tags: Joi.array().items(Joi.string()).max(10),\n  customFields: Joi.object(),\n  description: Joi.string().max(1000)\n})\n\nconst validate = (schema) => {\n  return (req, res, next) => {\n    const { error, value } = schema.validate(req.body, {\n      abortEarly: false,\n      stripUnknown: true\n    })\n\n    if (error) {\n      return res.status(400).json({\n        message: 'Validation error',\n        errors: error.details.map(d => ({\n          field: d.path.join('.'),\n          message: d.message\n        }))\n      })\n    }\n\n    req.validatedData = value\n    next()\n  }\n}\n\napp.post('/api/objects', authenticateToken, validate(objectSchema), ...)\n```\n\n## Implementation Steps\n\n1. Choose validation library (recommend: Joi)\n2. Create validation schemas for all endpoints\n3. Create validation middleware\n4. Add validation to all POST/PUT endpoints\n5. Update error handling for validation errors\n6. Add validation tests\n7. Document validation rules\n\n## Success Criteria\n\n- [ ] 100% of endpoints validated\n- [ ] All user input sanitized\n- [ ] Validation errors have clear messages\n- [ ] Tests verify validation rules\n- [ ] Documentation includes validation rules\n\n## Effort\n\n\u23f1\ufe0f **1 week**\n\n## Dependencies\n\n**Requires:** #1 (Refactor architecture)\n\n## Phase\n\n**Phase 2 - High Priority** \ud83d\udfe0\n\n## Reference\n\n- `ARCHITECTURE_REVIEW.md` - Issue #8\n- `REFACTORING_ROADMAP.md` - Phase 2\n\n---\n\n**Metadata:**\n- **Effort:** 1 week\n- **Dependencies:** #1 (Refactor architecture)\n",
  "labels": [
    "high-priority",
    "security",
    "backend",
    "validation",
    "phase-2"
  ]
}